{"version":3,"sources":["home.jsx","classroom.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["Home","Carousel","Item","className","src","alt","Caption","Container","Row","Col","md","Image","fluid","SENSOR_KEYS","Classroom","roomID","useParams","useState","data","setData","status","setStatus","voteOn","setVoteOn","voteOff","setVoteOff","client","mqtt","connect","process","on","subscribe","err","publish","topic","message","path","split","value","parseInt","toString","includes","CO2","Math","round","Comfort","ProgressBar","variant","now","max","CardDeck","Object","keys","map","key","Card","Header","Body","ListGroup","ButtonGroup","size","Button","onClick","qos","retain","App","rooms","Navbar","bg","expand","Brand","href","Toggle","aria-controls","Collapse","id","Nav","roomId","to","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.af1421b1.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  Container, Carousel, Col, Row, Image,\n} from 'react-bootstrap';\n\nfunction Home() {\n  return (\n    <div>\n      <Carousel>\n        <Carousel.Item>\n          <img\n            className=\"d-block w-100\"\n            src=\"3D_room.jpg\"\n            alt=\"First slide\"\n          />\n          <Carousel.Caption>\n            <h1>空氣一吉棒</h1>\n          </Carousel.Caption>\n        </Carousel.Item>\n      </Carousel>\n      <Container className=\"p-5\">\n        <Row>\n          <Col md>\n            <h2>系統介紹</h2>\n            <p>在教室場域內，佈置多個sensor，監測教室內CO、CO2、溫度、濕度、PVOC…等參數。</p>\n            <p>當有任一參數超出我們設定的範圍的時候，我們的換氣系統便會自動開啟，</p>\n            <p>當室內與室外換氣完，參數降至我們設定人體舒適的參數區間後，系統會自動關閉，來達到省電、節能及智慧化的效果。</p>\n            <p>此外，該系統也可透過手動或是網頁上來控制開啟與否。</p>\n          </Col>\n          <Col md>\n            <Image src=\"system.png\" alt=\"Introduction\" fluid />\n          </Col>\n        </Row>\n      </Container>\n      <hr />\n      <Container className=\"p-5\">\n        <Row>\n          <Col md>\n            <Image src=\"future.png\" alt=\"Future Outlook\" fluid />\n          </Col>\n          <Col md>\n            <h2>未來展望</h2>\n            <p>「呼吸的每一口氣，都是為了活下去。」</p>\n            <p>那麼，你想要更健康的活著嗎？</p>\n            <p>根據台敏醫學會楊崑德理事長所說：</p>\n            <p>「預防過敏應該從孕期就要做好完善預防！懷孕時就應避免暴露於二手菸、PM2.5、塑化劑的環境，來達成預防新生兒過敏的狀況。」</p>\n            <p>在其中PM 2.5的部分，是我們需要加強防護的部分，</p>\n            <p>因此在未來我們可能考慮使用更高係數的濾網或是增加濾網袋來收集灰塵等等方便換氣系統清洗。</p>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState } from 'react';\nimport {\n  Container, ButtonGroup, Button, Card, CardDeck, ProgressBar, ListGroup,\n} from 'react-bootstrap';\nimport { useParams } from 'react-router-dom';\nimport mqtt from 'mqtt';\n\nconst SENSOR_KEYS = ['temp', 'RH', 'PM2.5', 'CO2', 'CO'];\n\nfunction Classroom() {\n  const { roomID } = useParams();\n\n  const [data, setData] = useState({});\n  const [status, setStatus] = useState('關');\n  const [voteOn, setVoteOn] = useState(0);\n  const [voteOff, setVoteOff] = useState(0);\n\n  const client = mqtt.connect(process.env.REACT_APP_MQTT_BROKER);\n  client.on('connect', () => {\n    client.subscribe(`${roomID}/#`, (err) => {\n      if (!err) client.publish('presence', 'Hello mqtt');\n    });\n  });\n  client.on('message', (topic, message) => {\n    const path = topic.split('/');\n    switch (path[1]) {\n      case 'vote': {\n        const value = parseInt(message.toString(), 10);\n        if (path[2] === 'on') setVoteOn(value);\n        if (path[2] === 'off') setVoteOff(value);\n        break;\n      }\n      case 'result': {\n        if (message.toString() === '1') setStatus('開');\n        else setStatus('關');\n        break;\n      }\n      case 'sensors': {\n        if (SENSOR_KEYS.includes(path[3])) {\n          data[path[3]] = message.toString();\n          if (path[3] === 'CO2') data.CO2 = Math.round(data.CO2);\n          setData(data);\n        }\n        break;\n      }\n      case 'com3': {\n        data.Comfort = message.toString();\n        setData(data);\n        break;\n      }\n      default:\n        break;\n    }\n  });\n\n  const handleVoteOn = () => {\n    const value = voteOn + 1;\n    client.publish(`${roomID}/vote/on`, value.toString(), {\n      qos: 1,\n      retain: true,\n    });\n  };\n  const handleVoteOff = () => {\n    const value = voteOff + 1;\n    client.publish(`${roomID}/vote/off`, value.toString(), {\n      qos: 1,\n      retain: true,\n    });\n  };\n\n  return (\n    <Container>\n      <div className=\"p-4 w-100 text-center\">\n        <h1>{`Voting ${roomID}`}</h1>\n        <strong>投票規則</strong>\n        <p>只要某方超過65%就獲勝, 若都沒超過系統則自動運行</p>\n      </div>\n      <div className=\"pb-4 text-center w-100\">\n        <strong>目前狀態</strong>\n        <p className=\"display-1\">{status}</p>\n        <ProgressBar>\n          <ProgressBar variant=\"success\" now={voteOn} max={voteOn + voteOff} key={1} />\n          <ProgressBar variant=\"danger\" now={voteOff} max={voteOn + voteOff} key={2} />\n        </ProgressBar>\n      </div>\n      <p>\n        參考氣象局舒適度的公式以及考量到在一定程度上co2濃度過高會導致頭暈、想睡等負面影響，\n        我們利用測量出來的數值代入我們設計的公式，最後得出0~6的舒適度等第，儀器在小於等於2的時候通風裝置自動開啟，其它時間則是預設為關閉。\n      </p>\n      <CardDeck className=\"mb-4\">\n        {\n          Object.keys(data).map((key) => (\n            <Card className=\"text-center\">\n              <Card.Header className=\"text-uppercase font-weight-bold\">{key}</Card.Header>\n              <Card.Body className=\"display-4\">{data[key]}</Card.Body>\n            </Card>\n          ))\n        }\n      </CardDeck>\n      <div className=\"text-center\">\n        <CardDeck>\n          <Card>\n            <Card.Header>開啟裝置</Card.Header>\n            <ListGroup variant=\"flush\">\n              <ListGroup.Item>好處1：讓室內空氣更加清新。</ListGroup.Item>\n              <ListGroup.Item>好處2：內外空氣流通，降低疾病傳染風險。</ListGroup.Item>\n              <ListGroup.Item>壞處1：可能讓室內空氣溫度稍微上升。</ListGroup.Item>\n              <ListGroup.Item>壞處2：耗能以及需要定期清洗濾網。</ListGroup.Item>\n            </ListGroup>\n          </Card>\n          <Card>\n            <Card.Header>關閉裝置</Card.Header>\n            <ListGroup variant=\"flush\">\n              <ListGroup.Item>好處1：室內溫度保持在空調所設定的溫度。</ListGroup.Item>\n              <ListGroup.Item>好處2：節能以及清洗濾網週期延長。</ListGroup.Item>\n              <ListGroup.Item>壞處1：室內CO2累積導致頭暈、想睡。</ListGroup.Item>\n              <ListGroup.Item>壞處2：內外空氣不流通，增加疾病傳染風險。</ListGroup.Item>\n            </ListGroup>\n          </Card>\n        </CardDeck>\n        <h2>你可以投票</h2>\n        <ButtonGroup size=\"lg\" className=\"w-100\">\n          <Button variant=\"success\" onClick={handleVoteOn}>On</Button>\n          <Button variant=\"danger\" onClick={handleVoteOff}>Off</Button>\n        </ButtonGroup>\n      </div>\n    </Container>\n  );\n}\n\nexport default Classroom;\n","import React from 'react';\nimport {\n  BrowserRouter as Router, Switch, Route, Link,\n} from 'react-router-dom';\nimport { Navbar, Nav } from 'react-bootstrap';\n\nimport Home from './home';\nimport Classroom from './classroom';\n\nfunction App() {\n  const rooms = process.env.REACT_APP_ROOMS.split(',');\n\n  return (\n    <Router>\n      <div>\n        <Navbar bg=\"light\" expand=\"lg\">\n          <Navbar.Brand href=\"/\">空氣一吉棒</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              { rooms.map((roomId) => <Link key={roomId} className=\"nav-link\" to={`/${roomId}`}>{roomId}</Link>) }\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <Switch>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n          <Route path=\"/:roomID\">\n            <Classroom />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}